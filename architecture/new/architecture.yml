arch_conf:
    - name: Name
      value: RISC-V (RV32IMFD)
    - name: Bits
      value: "32"
    - name: Description
      value: RISC-V is an instruction set architecture (ISA) based on the RISC type and its hardware is free. This architecture was created in 2010 at the University of California, Berkeley.
    - name: Data Format
      value: big_endian
    - name: Memory Alignment
      value: "1"
    - name: Main Function
      value: main
    - name: Passing Convention
      value: "1"
    - name: Sensitive Register Name
      value: "1"
    - name: CommentPrefix
      value: "#"

components:
    - name: Control registers
      type: ctrl_registers
      double_precision: false
      elements:
          - name:
                - PC
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - program_counter
    - name: Integer registers
      type: int_registers
      double_precision: false
      elements:
          - name:
                - x0
                - zero
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - ignore_write
          - name:
                - x1
                - ra
            nbits: "32"
            value: 4294967295
            default_value: 4294967295
            properties:
                - read
                - write
          - name:
                - x2
                - sp
            nbits: "32"
            value: 268435452
            default_value: 268435452
            properties:
                - read
                - write
                - stack_pointer
          - name:
                - x3
                - gp
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - global_pointer
          - name:
                - x4
                - tp
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x5
                - t0
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x6
                - t1
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x7
                - t2
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x8
                - fp
                - s0
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - frame_pointer
                - saved
          - name:
                - x9
                - s1
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - x10
                - a0
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x11
                - a1
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x12
                - a2
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x13
                - a3
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x14
                - a4
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x15
                - a5
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x16
                - a6
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x17
                - a7
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x18
                - s2
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - x19
                - s3
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - x20
                - s4
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - x21
                - s5
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - x22
                - s6
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - x23
                - s7
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - x24
                - s8
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - x25
                - s9
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - x26
                - s10
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - x27
                - s11
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - x28
                - t3
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x29
                - t4
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x30
                - t5
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - x31
                - t6
            nbits: "32"
            value: 0
            default_value: 0
            properties:
                - read
                - write
    - name: Floating point registers
      type: fp_registers
      double_precision: true
      double_precision_type: extended
      elements:
          - name:
                - f0
                - ft0
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f1
                - ft1
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f2
                - ft2
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f3
                - ft3
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f4
                - ft4
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f5
                - ft5
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f6
                - ft6
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f7
                - ft7
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f8
                - fs0
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - f9
                - fs1
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - f10
                - fa0
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f11
                - fa1
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f12
                - fa2
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f13
                - fa3
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f14
                - fa4
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f15
                - fa5
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f16
                - fa6
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f17
                - fa7
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f18
                - fs2
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - f19
                - fs3
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - f20
                - fs4
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - f21
                - fs5
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - f22
                - fs6
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - f23
                - fs7
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - f24
                - fs8
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - f25
                - fs9
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - f26
                - fs10
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - f27
                - fs11
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
                - saved
          - name:
                - f28
                - ft8
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f29
                - ft9
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f30
                - ft10
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write
          - name:
                - f31
                - ft11
            nbits: "64"
            value: 0
            default_value: 0
            properties:
                - read
                - write

directives:
    - name: .data
      action: data_segment
      size: null
    - name: .text
      action: code_segment
      size: null
    - name: .bss
      action: global_symbol
      size: null
    - name: .zero
      action: space
      size: 1
    - name: .space
      action: space
      size: 1
    - name: .align
      action: align
      size: null
    - name: .balign
      action: balign
      size: null
    - name: .globl
      action: global_symbol
      size: null
    - name: .string
      action: ascii_null_end
      size: null
    - name: .asciz
      action: ascii_null_end
      size: null
    - name: .ascii
      action: ascii_not_null_end
      size: null
    - name: .byte
      action: byte
      size: 1
    - name: .half
      action: half_word
      size: 2
    - name: .word
      action: word
      size: 4
    - name: .dword
      action: double_word
      size: 8
    - name: .float
      action: float
      size: 4
    - name: .double
      action: double
      size: 8

memory_layout:
    - name: text start
      value: "0x00000000"
    - name: text end
      value: "0x001FFFFF"
    - name: data start
      value: "0x00200000"
    - name: data end
      value: "0x05BBFCBF"
    - name: stack start
      value: "0x0FFFFFFC"
    - name: stack end
      value: "0x0FFFFFFF"

templates:
    - name: B
      nwords: 1
      clk_cycles: 1
      fields:
          - name: opcode
            type: co
            startbit: 6
            stopbit: 0
            order: 0
          - name: rs1
            type: INT-Reg
            startbit: 19
            stopbit: 15
            order: 1
          - name: rs2
            type: INT-Reg
            startbit: 24
            stopbit: 20
            order: 2
          - name: imm
            type: offset_bytes
            startbit:
                - 31
                - 7
                - 30
                - 11
            stopbit:
                - 31
                - 7
                - 25
                - 8
            padding: 1
            order: 3
          - name: funct3
            type: cop
            startbit: 14
            stopbit: 12

    - name: I
      nwords: 1
      clk_cycles: 1
      fields:
          - name: opcode
            type: co
            startbit: 6
            stopbit: 0
            order: 0
          - name: rd
            type: INT-Reg
            startbit: 11
            stopbit: 7
            order: 1
          - name: imm
            type: inm-signed
            startbit: 31
            stopbit: 20
            order: 3
          - name: rs1
            type: INT-Reg
            startbit: 19
            stopbit: 15
            order: 2
          - name: funct3
            type: cop
            startbit: 14
            stopbit: 12

    - name: I-Offset
      # Not an "official" instruction, but used for the offset in the I-type instructions
      nwords: 1
      clk_cycles: 1
      fields:
          - name: opcode
            type: co
            startbit: 6
            stopbit: 0
            order: 0
          - name: rd
            type: INT-Reg
            startbit: 11
            stopbit: 7
            order: 1
          - name: imm
            type: inm-signed
            startbit: 31
            stopbit: 20
            order: 2
          - name: rs1
            type: INT-Reg
            startbit: 19
            stopbit: 15
            order: 3
            prefix: (
            suffix: )
          - name: funct3
            type: cop
            startbit: 14
            stopbit: 12

    - name: I-Shift
      nwords: 1
      clk_cycles: 1
      fields:
          - name: opcode
            type: co
            startbit: 6
            stopbit: 0
            order: 0
          - name: rd
            type: INT-Reg
            startbit: 11
            stopbit: 7
            order: 1
          - name: rs1
            type: INT-Reg
            startbit: 19
            stopbit: 15
            order: 2
          - name: shamt
            type: inm-unsigned
            startbit: 24
            stopbit: 20
            order: 3
          - name: funct7
            type: cop
            startbit: 31
            stopbit: 25
          - name: funct3
            type: cop
            startbit: 14
            stopbit: 12

    - name: J
      nwords: 1
      clk_cycles: 1
      fields:
          - name: opcode
            type: co
            startbit: 6
            stopbit: 0
            order: 0
          - name: rd
            type: INT-Reg
            startbit: 11
            stopbit: 7
            order: 1
          - name: imm
            type: offset_bytes
            startbit:
                - 31
                - 19
                - 20
                - 30
            stopbit:
                - 31
                - 12
                - 20
                - 21
            padding: 1
            order: 2

    - name: R
      nwords: 1
      clk_cycles: 1
      fields:
          - name: opcode
            type: co
            startbit: 6
            stopbit: 0
            order: 0
          - name: rd
            type: INT-Reg
            startbit: 11
            stopbit: 7
            order: 1
          - name: rs1
            type: INT-Reg
            startbit: 19
            stopbit: 15
            order: 2
          - name: rs2
            type: INT-Reg
            startbit: 24
            stopbit: 20
            order: 3
          - name: funct7
            type: cop
            startbit: 31
            stopbit: 25
          - name: funct3
            type: cop
            startbit: 14
            stopbit: 12

    - name: R-Floating # Used in rv32f / rv64f
      nwords: 1
      clk_cycles: 1
      fields:
          - name: opcode
            type: co
            startbit: 6
            stopbit: 0
            order: 0
          - name: rd
            type: SFP-Reg
            startbit: 11
            stopbit: 7
            order: 1
          - name: rs1
            type: SFP-Reg
            startbit: 19
            stopbit: 15
            order: 2
          - name: rs2
            type: SFP-Reg
            startbit: 24
            stopbit: 20
            order: 3
          - name: funct7
            type: cop
            startbit: 31
            stopbit: 25
          - name: funct3
            type: cop
            startbit: 14
            stopbit: 12

    - name: R-IntToFloat # fcvt.s.w,...
      nwords: 1
      clk_cycles: 1
      fields:
          - name: opcode
            type: co
            startbit: 6
            stopbit: 0
            order: 0
          - name: rd
            type: SFP-Reg
            startbit: 11
            stopbit: 7
            order: 1
          - name: rs1
            type: INT-Reg
            startbit: 19
            stopbit: 15
            order: 2
          - name: funct5
            type: cop
            startbit: 24
            stopbit: 20
          - name: funct7
            type: cop
            startbit: 31
            stopbit: 25
          - name: funct3
            type: cop
            startbit: 14
            stopbit: 12

    - name: R-FloatToInt # fcvt.w.s,...
      nwords: 1
      clk_cycles: 1
      fields:
          - name: opcode
            type: co
            startbit: 6
            stopbit: 0
            order: 0
          - name: rd
            type: INT-Reg
            startbit: 11
            stopbit: 7
            order: 1
          - name: rs1
            type: SFP-Reg
            startbit: 19
            stopbit: 15
            order: 2
          - name: funct5
            type: cop
            startbit: 24
            stopbit: 20
          - name: funct7
            type: cop
            startbit: 31
            stopbit: 25
          - name: funct3
            type: cop
            startbit: 14
            stopbit: 12

    - name: R4
      nwords: 1
      clk_cycles: 1
      fields:
          - name: opcode
            type: co
            startbit: 6
            stopbit: 0
            order: 0
          - name: rd
            type: SFP-Reg
            startbit: 11
            stopbit: 7
            order: 1
          - name: rs1
            type: SFP-Reg
            startbit: 19
            stopbit: 15
            order: 2
          - name: rs2
            type: SFP-Reg
            startbit: 24
            stopbit: 20
            order: 3
          - name: rs3
            type: SFP-Reg
            startbit: 31
            stopbit: 27
            order: 4
          - name: funct3
            type: cop
            startbit: 14
            stopbit: 12
          - name: funct2
            type: cop
            startbit: 26
            stopbit: 25

    - name: S
      nwords: 1
      clk_cycles: 1
      fields:
          - name: opcode
            type: co
            startbit: 6
            stopbit: 0
            order: 0
          - name: rs2
            type: INT-Reg
            startbit: 24
            stopbit: 20
            order: 1
          - name: imm
            type: inm-signed
            startbit:
                - 31
                - 11
            stopbit:
                - 25
                - 7
            order: 2
          - name: rs1
            type: INT-Reg
            startbit: 19
            stopbit: 15
            prefix: (
            suffix: )
            order: 3
          - name: funct3
            type: cop
            startbit: 14
            stopbit: 12

    - name: U
      nwords: 1
      clk_cycles: 1
      fields:
          - name: opcode
            type: co
            startbit: 6
            stopbit: 0
            order: 0
          - name: rd
            type: INT-Reg
            startbit: 11
            stopbit: 7
            order: 1
          - name: imm
            type: offset_bytes
            startbit: 31
            stopbit: 12
            order: 2

    - name: Custom
      nwords: 1
      clk_cycles: 1
      fields:
          - name: opcode
            type: co
            startbit: 6
            stopbit: 0
            order: 0

isas:
    - name: RV32I
      description: "Base integer instruction set"
    - name: RV32M
      description: "Integer multiplication and division instructions"
    - name: RV32F
      description: "Single-precision floating-point instructions"
    - name: RV32D
      description: "Double-precision floating-point instructions"
